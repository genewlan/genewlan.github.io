<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>50_ggplot_picture | GeneWlan</title><meta name="author" content="ZhangLei"><meta name="copyright" content="ZhangLei"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="50个ggplot2可视化案例 一个有效的图标:  在不歪曲事实的情况下传达正确的信息 简单而优雅的表达信息内容 通过美学表达信息，而不是掩盖信息 没有信息负载  下面介绍了八类常见的图表可视化情景。在绘图之前，请仔细考虑你准备如何通过可视化的方式表达统计事实或事件关系。也许就是这八类情景中的一个。 类型一：相关性 以及几个图用于检查两个变量见的相关性 散点图 散点图是数据分析过程中使用最多的图标">
<meta property="og:type" content="article">
<meta property="og:title" content="50_ggplot_picture">
<meta property="og:url" content="http://genewlan.github.io/2023/10/31/picture/index.html">
<meta property="og:site_name" content="GeneWlan">
<meta property="og:description" content="50个ggplot2可视化案例 一个有效的图标:  在不歪曲事实的情况下传达正确的信息 简单而优雅的表达信息内容 通过美学表达信息，而不是掩盖信息 没有信息负载  下面介绍了八类常见的图表可视化情景。在绘图之前，请仔细考虑你准备如何通过可视化的方式表达统计事实或事件关系。也许就是这八类情景中的一个。 类型一：相关性 以及几个图用于检查两个变量见的相关性 散点图 散点图是数据分析过程中使用最多的图标">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png">
<meta property="article:published_time" content="2023-10-31T08:48:54.000Z">
<meta property="article:modified_time" content="2023-10-31T09:12:21.347Z">
<meta property="article:author" content="ZhangLei">
<meta property="article:tag" content="ggplot">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://genewlan.github.io/2023/10/31/picture/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '50_ggplot_picture',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-10-31 17:12:21'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><!-- hexo injector head_end start -->
    <style>
      #background-effect {
        position: fixed !important;
        top: 0px;
        left: 0px;
        z-index: -1;
        width: 100%;
        height: 100%
      }
    </style>
  <!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="GeneWlan" type="application/atom+xml">
<link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet" /></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">16</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">13</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://s2.loli.net/2023/03/21/ZVUmQFknE2JosXT.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="GeneWlan"><span class="site-name">GeneWlan</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">50_ggplot_picture</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-10-31T08:48:54.000Z" title="发表于 2023-10-31 16:48:54">2023-10-31</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-10-31T09:12:21.347Z" title="更新于 2023-10-31 17:12:21">2023-10-31</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="50_ggplot_picture"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1>50个ggplot2可视化案例</h1>
<p><strong>一个有效的图标:</strong></p>
<ul>
<li>在不歪曲事实的情况下传达正确的信息</li>
<li>简单而优雅的表达信息内容</li>
<li>通过美学表达信息，而不是掩盖信息</li>
<li>没有信息负载</li>
</ul>
<p>下面介绍了八类常见的图表可视化情景。在绘图之前，请仔细考虑你准备如何通过可视化的方式表达统计事实或事件关系。也许就是这八类情景中的一个。</p>
<h2 id="类型一：相关性">类型一：相关性</h2>
<p>以及几个图用于检查两个变量见的相关性</p>
<h3 id="散点图">散点图</h3>
<p>散点图是数据分析过程中使用最多的图标之一。当你想了解两个变量间的相关性时，首先想到的就是散点图。<br>
我们可以用ggplot2里的geom_point()绘制散点图。另外，还可以用geom_smooth来绘制平滑曲线，通过设置methon='lm’来绘制最佳拟合曲线。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">options(scipen=999) </span><br><span class="line">library(ggplot2)</span><br><span class="line">theme_set(theme_bw())  </span><br><span class="line">data(&quot;midwest&quot;, package = &quot;ggplot2&quot;)</span><br><span class="line"># midwest &lt;- read.csv(&quot;http://goo.gl/G1K41K&quot;)  </span><br><span class="line"></span><br><span class="line"># Scatterplot</span><br><span class="line">gg &lt;- ggplot(midwest, aes(x=area, y=poptotal)) + </span><br><span class="line">  geom_point(aes(col=state, size=popdensity)) + </span><br><span class="line">  geom_smooth(method=&quot;loess&quot;, se=F) + </span><br><span class="line">  xlim(c(0, 0.1)) + </span><br><span class="line">  ylim(c(0, 500000)) + </span><br><span class="line">  labs(subtitle=&quot;Area Vs Population&quot;, </span><br><span class="line">       y=&quot;Population&quot;, </span><br><span class="line">       x=&quot;Area&quot;, </span><br><span class="line">       title=&quot;Scatterplot&quot;, </span><br><span class="line">       caption = &quot;Source: midwest&quot;)</span><br><span class="line"></span><br><span class="line">plot(gg)</span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZyPOH89nNxhA1P4ib5x3GgSicG8SxBriaQYiclawurDWdu8SWryAo1EUYAPw/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h3 id="带有环绕的散点图">带有环绕的散点图</h3>
<p>在展示结果时，有时可以将某个特殊的区域包围起来，从而达到突出展示的效果。<br>
我们可以通过ggalt包里的geom_encircle()实现。<br>
在geom_encircle()中，我们可以指定需要突出的数据集，此外还可以扩展曲线，以便在点之外传递；以及修改曲线的颜色及大小。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"># install &#x27;ggalt&#x27; pkg</span><br><span class="line"># devtools::install_github(&quot;hrbrmstr/ggalt&quot;)</span><br><span class="line">options(scipen = 999)</span><br><span class="line">library(ggplot2)</span><br><span class="line">library(ggalt)</span><br><span class="line">midwest_select &lt;- midwest[midwest$poptotal &gt; 350000 &amp; </span><br><span class="line">                            midwest$poptotal &lt;= 500000 &amp; </span><br><span class="line">                            midwest$area &gt; 0.01 &amp; </span><br><span class="line">                            midwest$area &lt; 0.1, ]</span><br><span class="line"></span><br><span class="line"># Plot</span><br><span class="line">ggplot(midwest, aes(x=area, y=poptotal)) + </span><br><span class="line">  geom_point(aes(col=state, size=popdensity)) +   # draw points</span><br><span class="line">  geom_smooth(method=&quot;loess&quot;, se=F) + </span><br><span class="line">  xlim(c(0, 0.1)) + </span><br><span class="line">  ylim(c(0, 500000)) +   # draw smoothing line</span><br><span class="line">  geom_encircle(aes(x=area, y=poptotal), </span><br><span class="line">                data=midwest_select, </span><br><span class="line">                color=&quot;red&quot;, </span><br><span class="line">                size=2, </span><br><span class="line">                expand=0.08) +   # encircle</span><br><span class="line">  labs(subtitle=&quot;Area Vs Population&quot;, </span><br><span class="line">       y=&quot;Population&quot;, </span><br><span class="line">       x=&quot;Area&quot;, </span><br><span class="line">       title=&quot;Scatterplot + Encircle&quot;, </span><br><span class="line">       caption=&quot;Source: midwest&quot;)    </span><br><span class="line">        </span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZyScv1s3ZiaH0AMfJYwaHibOuwgZG5qBcyYicXnXJM4ZHcAlXfO9AzeCIjA/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h3 id="jitter图">Jitter图</h3>
<p>我们看看先用一组新的数据绘制散点图。这次，我将使用mpg数据集来绘制城市里程（cty）与公路里程。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># load package and data</span><br><span class="line">library(ggplot2)</span><br><span class="line">data(mpg, package=&quot;ggplot2&quot;) # alternate source: &quot;http://goo.gl/uEeRGu&quot;)theme_set(theme_bw())  # pre-set the bw theme.</span><br><span class="line"></span><br><span class="line">g &lt;- ggplot(mpg, aes(cty, hwy))</span><br><span class="line"></span><br><span class="line"># Scatterplot</span><br><span class="line">g + geom_point() + </span><br><span class="line">  geom_smooth(method=&quot;lm&quot;, se=F) +</span><br><span class="line">  labs(subtitle=&quot;mpg: city vs highway mileage&quot;, </span><br><span class="line">       y=&quot;hwy&quot;, </span><br><span class="line">       x=&quot;cty&quot;, </span><br><span class="line">       title=&quot;Scatterplot with overlapping points&quot;, </span><br><span class="line">       caption=&quot;Source: midwest&quot;)</span><br><span class="line">       </span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZygZIxic5KfCticbZSULtzPTY5vTkHCXdIsxGvETIhrxjHU1YNb5tPqzqA/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<p>虽然我们能够从图中看出，两个变量存在相关性。但是不难发现，很多散点被隐藏了，因为数据存在重叠的问题。由于cty和hvy两个变量都是整数，所以数据重叠的现象更加严重。对于这类数据集的散点图，展示过程中应该格外小心。<br>
那么应该如何解决一个问题呢？我们可以使用jitter_geom()对数据增加抖动，通过设置wigth，使得重叠的点在原始位置随机抖动。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">  # load package and data</span><br><span class="line">library(ggplot2)</span><br><span class="line">data(mpg, package=&quot;ggplot2&quot;)</span><br><span class="line"># mpg &lt;- read.csv(&quot;http://goo.gl/uEeRGu&quot;)</span><br><span class="line"></span><br><span class="line"># Scatterplot</span><br><span class="line">theme_set(theme_bw())  # pre-set the bw theme.</span><br><span class="line">g &lt;- ggplot(mpg, aes(cty, hwy))</span><br><span class="line">g + geom_jitter(width = .5, size=1) +</span><br><span class="line">  labs(subtitle=&quot;mpg: city vs highway mileage&quot;, </span><br><span class="line">       y=&quot;hwy&quot;, </span><br><span class="line">       x=&quot;cty&quot;, </span><br><span class="line">       title=&quot;Jittered Points&quot;)    </span><br><span class="line">       </span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZys2gZoWwCDUItZofQyJrZ7lO51sdIk4ibORVhDN3XLjPLvRhGfdRStuA/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h3 id="计数图">计数图</h3>
<p>第二种解决散点重叠的方法是使用计数图。当数据存在散点重叠时，我们可以用散点大小来表达数据重叠的程度。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># load package and data</span><br><span class="line">library(ggplot2)</span><br><span class="line">data(mpg, package=&quot;ggplot2&quot;)</span><br><span class="line"># mpg &lt;- read.csv(&quot;http://goo.gl/uEeRGu&quot;)</span><br><span class="line"></span><br><span class="line"># Scatterplot</span><br><span class="line">theme_set(theme_bw())  # pre-set the bw theme.</span><br><span class="line">g &lt;- ggplot(mpg, aes(cty, hwy))</span><br><span class="line">g + geom_count(col=&quot;tomato3&quot;, show.legend=F) +</span><br><span class="line">  labs(subtitle=&quot;mpg: city vs highway mileage&quot;, </span><br><span class="line">       y=&quot;hwy&quot;, </span><br><span class="line">       x=&quot;cty&quot;, </span><br><span class="line">       title=&quot;Counts Plot&quot;)</span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZyxlOZVSgQpLGVhQLyCCk1ForMt0KZo19Gjv2S6M9hreZyF5GtVLnHdA/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h3 id="气泡图">气泡图</h3>
<p>虽然散点图能够表示两个连续变量间的相关关系。但如果想在以下两个方面了解数据间的潜在关系时，气泡图会更有用：</p>
<p>1.基于分类变量，修改散点颜色<br>
2.基于另一个连续变量，表示散点的大小</p>
<p>简单来说，如果你有一个四维变量的数据，两个连续变量，一个分类变量用以表示颜色，一个连续变量表示点的大小，那么气泡图就非常适合了。</p>
<p>比如下面这个例子，气泡图清楚地区分了制造商之间的差异以及最佳拟合曲线的斜率变化，从而能够更好的比较不同组群间的差异。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># load package and data</span><br><span class="line">library(ggplot2)</span><br><span class="line">data(mpg, package=&quot;ggplot2&quot;)</span><br><span class="line"># mpg &lt;- read.csv(&quot;http://goo.gl/uEeRGu&quot;)</span><br><span class="line"></span><br><span class="line">mpg_select &lt;- mpg[mpg$manufacturer %in% c(&quot;audi&quot;, &quot;ford&quot;, &quot;honda&quot;, &quot;hyundai&quot;), ]</span><br><span class="line"></span><br><span class="line"># Scatterplot</span><br><span class="line">theme_set(theme_bw())  # pre-set the bw theme.</span><br><span class="line">g &lt;- ggplot(mpg_select, aes(displ, cty)) + </span><br><span class="line">  labs(subtitle=&quot;mpg: Displacement vs City Mileage&quot;,</span><br><span class="line">       title=&quot;Bubble chart&quot;)</span><br><span class="line"></span><br><span class="line">g + geom_jitter(aes(col=manufacturer, size=hwy)) + </span><br><span class="line">  geom_smooth(aes(col=manufacturer), method=&quot;lm&quot;, se=F)</span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZy34Via4kH9Gn63TcSIn1GNd4tGTc0AQbcyr930XQZqibqkeyhsib0EDpdA/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h3 id="动态气泡图">动态气泡图</h3>
<p>对于动态气泡图的实现，可以使用gganimate包。动态气泡图和普通气泡图的区别就在于使用第五维数据(一般是时间)来展示数据间的变化。<br>
动态气泡图的处理方法和其它图形基本一致，不同的是需要在aes层指定动画展示的变量。构建绘图后，可以使用gganimate()通过设置动画的时间间隔。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># Source: https://github.com/dgrtwo/gganimate</span><br><span class="line"># install.packages(&quot;cowplot&quot;)  # a gganimate dependency</span><br><span class="line"># devtools::install_github(&quot;dgrtwo/gganimate&quot;)</span><br><span class="line">library(ggplot2)</span><br><span class="line">library(gganimate)</span><br><span class="line">library(gapminder)</span><br><span class="line">theme_set(theme_bw())  # pre-set the bw theme.</span><br><span class="line"></span><br><span class="line">g &lt;- ggplot(gapminder, aes(gdpPercap, lifeExp, size = pop, frame = year)) +  geom_point() +</span><br><span class="line">  geom_smooth(aes(group = year), </span><br><span class="line">              method = &quot;lm&quot;, </span><br><span class="line">              show.legend = FALSE) +</span><br><span class="line">  facet_wrap(~continent, scales = &quot;free&quot;) +</span><br><span class="line">  scale_x_log10()  # convert to log scale</span><br><span class="line"></span><br><span class="line">gganimate(g, interval=0.2) </span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_gif/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZyT14Ma7kt3LkDlcicVSMojDBiayzoCJadML14VkUvM3sLkZCLdcJ2GpHQ/640?wx_fmt=gif&amp;wxfrom=5&amp;wx_lazy=1" alt="图片"></p>
<h3 id="边缘分布的直方图-箱型图">边缘分布的直方图／箱型图</h3>
<p>如果你想在用一张图表中显示两个变量的关系以及分布，那么可以使用边缘分布直方图。它可以在散点图的X、Y周，显示变量的直方图。<br>
边缘分布直方图可以通过ggExtra包的ggMarginal()函数实现。除了绘制直方图外，还支持绘制边缘分布的箱型图和密度函数。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># load package and data</span><br><span class="line">library(ggplot2)</span><br><span class="line">library(ggExtra)</span><br><span class="line">data(mpg, package=&quot;ggplot2&quot;)</span><br><span class="line"># mpg &lt;- read.csv(&quot;http://goo.gl/uEeRGu&quot;)</span><br><span class="line"></span><br><span class="line"># Scatterplot</span><br><span class="line">theme_set(theme_bw())  # pre-set the bw theme.</span><br><span class="line">mpg_select &lt;- mpg[mpg$hwy &gt;= 35 &amp; mpg$cty &gt; 27, ]</span><br><span class="line">g &lt;- ggplot(mpg, aes(cty, hwy)) + </span><br><span class="line">  geom_count() + </span><br><span class="line">  geom_smooth(method=&quot;lm&quot;, se=F)</span><br><span class="line"></span><br><span class="line">ggMarginal(g, type = &quot;histogram&quot;, fill=&quot;transparent&quot;)</span><br><span class="line">ggMarginal(g, type = &quot;boxplot&quot;, fill=&quot;transparent&quot;)</span><br><span class="line"># ggMarginal(g, type = &quot;density&quot;, fill=&quot;transparent&quot;)     </span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZyY1eHmDJAcHxzoIQfPXGrjpxicqPZghiauZ3t4rx3VPBiajiceUX1uqsTxQ/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZy1qfRPctflyG6eFI0AtB44TicGpEJxK1cUqpypV4aHUicBUnS9VFcpDgg/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h3 id="相关关系图">相关关系图</h3>
<p>相关关系图可以同时显示统一组数据中多个变量间的相关性。通过ggcorrplot包可以很方便的实现它。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># devtools::install_github(&quot;kassambara/ggcorrplot&quot;)</span><br><span class="line">library(ggplot2)</span><br><span class="line">library(ggcorrplot)</span><br><span class="line"></span><br><span class="line"># Correlation matrix</span><br><span class="line">data(mtcars)</span><br><span class="line">corr &lt;- round(cor(mtcars), 1)</span><br><span class="line"></span><br><span class="line"># Plot</span><br><span class="line">ggcorrplot(corr, hc.order = TRUE, </span><br><span class="line">           type = &quot;lower&quot;, </span><br><span class="line">           lab = TRUE, </span><br><span class="line">           lab_size = 3, </span><br><span class="line">           method=&quot;circle&quot;, </span><br><span class="line">           colors = c(&quot;tomato2&quot;, &quot;white&quot;, &quot;springgreen3&quot;), </span><br><span class="line">           title=&quot;Correlogram of mtcars&quot;, </span><br><span class="line">           ggtheme=theme_bw) </span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZyUNT5licNh8JzWrhRicpOMsRQgiaayJBIqYWsoS9wh4vrUepI2uhyHSTRA/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h2 id="类型二-偏差">类型二: 偏差</h2>
<h3 id="条形图">条形图</h3>
<p>条形图，是一种可以同时处理正负值的条形图表。一般通过geom<em>bar()函数就能实现，但是使用geom</em>bar()函数时，往往会出现概念上的混淆。因为该函数既可以画直方图也可以画条形图。<br>
比如，geom_bar()函数的stat参数默认值是count，这也意味着，当指定的数据是连续变量时，系统会生成直方图。为了创建条形图而不是直方图，需要作如下修改：</p>
<ul>
<li>设置参数stat=identity</li>
<li>在aes()中提供x和y两维变量，其中x是字符或因子型变量，y是数值型变量</li>
</ul>
<p>在下面的示例中，首先对mtcars数据集的mpg进行标准化。将那些mpg大于零的车辆标记为绿色，小于零的车辆标记为红色。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">library(ggplot2)</span><br><span class="line">theme_set(theme_bw())  </span><br><span class="line"></span><br><span class="line"># Data Prep</span><br><span class="line">data(&quot;mtcars&quot;)  # load data</span><br><span class="line">mtcars$`car name` &lt;- rownames(mtcars)  </span><br><span class="line">mtcars$mpg_z &lt;- round((mtcars$mpg - mean(mtcars$mpg))/sd(mtcars$mpg), 2)  </span><br><span class="line">mtcars$mpg_type &lt;- ifelse(mtcars$mpg_z &lt; 0, &quot;below&quot;, &quot;above&quot;)  </span><br><span class="line">mtcars &lt;- mtcars[order(mtcars$mpg_z), ]  # sort</span><br><span class="line">mtcars$`car name` &lt;- factor(mtcars$`car name`,                             levels = mtcars$`car name`)  #Diverging Barcharts</span><br><span class="line">ggplot(mtcars, aes(x=`car name`, y=mpg_z, label=mpg_z)) + </span><br><span class="line">  geom_bar(stat=&#x27;identity&#x27;, aes(fill=mpg_type), width=.5)  +</span><br><span class="line">  scale_fill_manual(name=&quot;Mileage&quot;, </span><br><span class="line">              labels = c(&quot;Above Average&quot;, &quot;Below Average&quot;), </span><br><span class="line">              values = c(&quot;above&quot;=&quot;#00ba38&quot;, &quot;below&quot;=&quot;#f8766d&quot;)) + </span><br><span class="line">  labs(subtitle=&quot;Normalised mileage from &#x27;mtcars&#x27;&quot;, </span><br><span class="line">       title= &quot;Diverging Bars&quot;) + </span><br><span class="line">  coord_flip()    </span><br></pre></td></tr></table></figure>
<p>![图片](data:image/svg+xml,&lt;%3Fxml version=‘1.0’ encoding=‘UTF-8’%3F&gt;<svg width="1px" height="1px" viewbox="0 0 1 1" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title/><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" fill-opacity="0"><g transform="translate(-249.000000, -126.000000)" fill="%23FFFFFF"><rect x="249" y="126" width="1" height="1"/></g></g></svg>)</p>
<h3 id="棒棒糖图">棒棒糖图</h3>
<p>棒棒糖图与条形图类似。一般可以使用geom_*point()和geom_*segment()来画棒棒糖图。借用条形图的数据，我们这里用棒棒糖图来实现它。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">library(ggplot2)</span><br><span class="line">theme_set(theme_bw())</span><br><span class="line"></span><br><span class="line">ggplot(mtcars, aes(x=`car name`, y=mpg_z, label=mpg_z)) + </span><br><span class="line">  geom_point(stat=&#x27;identity&#x27;, fill=&quot;black&quot;, size=6)  +</span><br><span class="line">  geom_segment(aes(y = 0, </span><br><span class="line">                   x = `car name`, </span><br><span class="line">                   yend = mpg_z, </span><br><span class="line">                   xend = `car name`), </span><br><span class="line">               color = &quot;black&quot;) +</span><br><span class="line">  geom_text(color=&quot;white&quot;, size=2) +</span><br><span class="line">  labs(title=&quot;Diverging Lollipop Chart&quot;, </span><br><span class="line">       subtitle=&quot;Normalized mileage from &#x27;mtcars&#x27;: Lollipop&quot;) + </span><br><span class="line">  ylim(-2.5, 2.5) +</span><br><span class="line">  coord_flip()    </span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZy7TD9gVLJicbbwITMYGianAIQvSbeuwh2DPYXtYheTlbLf7xl5TolcRicw/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h3 id="点图">点图</h3>
<p>点图与条形图原理一致，只是表达形式不同。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">library(ggplot2)</span><br><span class="line">theme_set(theme_bw())</span><br><span class="line"></span><br><span class="line"># Plot</span><br><span class="line">ggplot(mtcars, aes(x=`car name`, y=mpg_z, label=mpg_z)) + </span><br><span class="line">  geom_point(stat=&#x27;identity&#x27;, aes(col=mpg_type), size=6)  +</span><br><span class="line">  scale_color_manual(name=&quot;Mileage&quot;, </span><br><span class="line">                labels = c(&quot;Above Average&quot;, &quot;Below Average&quot;), </span><br><span class="line">                values = c(&quot;above&quot;=&quot;#00ba38&quot;, &quot;below&quot;=&quot;#f8766d&quot;)) + </span><br><span class="line">  geom_text(color=&quot;white&quot;, size=2) +</span><br><span class="line">  labs(title=&quot;Diverging Dot Plot&quot;, </span><br><span class="line">       subtitle=&quot;Normalized mileage from &#x27;mtcars&#x27;: Dotplot&quot;) + </span><br><span class="line">  ylim(-2.5, 2.5) +</span><br><span class="line">  coord_flip()    </span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZyib0ZFg0BaJ3ANGwpr51p3WQghQm4v7iboGkGibenzS6fqanC7BHvlTZvg/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h3 id="面积图">面积图</h3>
<p>面积图一般用来表示某指标与基准指标相比的变化情况。通常可以用geom_area()函数实现它。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">library(ggplot2)</span><br><span class="line">library(quantmod)</span><br><span class="line">data(&quot;economics&quot;, package = &quot;ggplot2&quot;)</span><br><span class="line"></span><br><span class="line"># Compute % Returns</span><br><span class="line">economics$returns_perc &lt;- c(0, diff(economics$psavert)/    economics$psavert[-length(economics$psavert)])</span><br><span class="line"># Create break points and labels for axis ticks</span><br><span class="line">brks &lt;- economics$date[seq(1, length(economics$date), 12)]</span><br><span class="line">lbls &lt;- lubridate::year(economics$date[seq(1,         length(economics$date), 12)])</span><br><span class="line"># Plot</span><br><span class="line">ggplot(economics[1:100, ], aes(date, returns_perc)) + </span><br><span class="line">  geom_area() + </span><br><span class="line">  scale_x_date(breaks=brks, labels=lbls) + </span><br><span class="line">  theme(axis.text.x = element_text(angle=90)) + </span><br><span class="line">  labs(title=&quot;Area Chart&quot;, </span><br><span class="line">       subtitle = &quot;Perc Returns for Personal Savings&quot;, </span><br><span class="line">       y=&quot;% Returns for Personal savings&quot;, </span><br><span class="line">       caption=&quot;Source: economics&quot;)   </span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZyf7GW4bAqhlaR1BjUgjaI5XAibbTF3WqAlsM0Mf2vpLdpDtAqwphWktA/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h2 id="类型三-排序">类型三: 排序</h2>
<p>排序图一般用于比较多个项目之间的指标大小。</p>
<h3 id="有序条形图">有序条形图</h3>
<p>有序条形图是按照Y轴变量大小进行排序的条形图。让我们用mpg数据集绘制每个制造商的平均城市里程数的有序条形图。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">cty_mpg &lt;- aggregate(mpg$cty, by=list(mpg$manufacturer), FUN=mean) </span><br><span class="line">colnames(cty_mpg) &lt;- c(&quot;make&quot;, &quot;mileage&quot;)  </span><br><span class="line">cty_mpg &lt;- cty_mpg[order(cty_mpg$mileage), ]  </span><br><span class="line">cty_mpg$make &lt;- factor(cty_mpg$make, levels = cty_mpg$make)  </span><br><span class="line"> library(ggplot2)</span><br><span class="line">theme_set(theme_bw())</span><br><span class="line"></span><br><span class="line"># Draw plot</span><br><span class="line">ggplot(cty_mpg, aes(x=make, y=mileage)) + </span><br><span class="line">  geom_bar(stat=&quot;identity&quot;, width=.5, fill=&quot;tomato3&quot;) + </span><br><span class="line">  labs(title=&quot;Ordered Bar Chart&quot;, </span><br><span class="line">       subtitle=&quot;Make Vs Avg. Mileage&quot;, </span><br><span class="line">       caption=&quot;source: mpg&quot;) + </span><br><span class="line">  theme(axis.text.x = element_text(angle=65, vjust=0.6))</span><br></pre></td></tr></table></figure>
<p>![图片](data:image/svg+xml,&lt;%3Fxml version=‘1.0’ encoding=‘UTF-8’%3F&gt;<svg width="1px" height="1px" viewbox="0 0 1 1" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title/><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" fill-opacity="0"><g transform="translate(-249.000000, -126.000000)" fill="%23FFFFFF"><rect x="249" y="126" width="1" height="1"/></g></g></svg>)</p>
<h3 id="棒棒糖图">棒棒糖图</h3>
<p>与条形图类似，棒棒糖图也具备类似的图形展示效果。通过将条形改为细线，可以让图形显得更简洁，更美观。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">library(ggplot2)</span><br><span class="line">theme_set(theme_bw())</span><br><span class="line"></span><br><span class="line"># Plot</span><br><span class="line">ggplot(cty_mpg, aes(x=make, y=mileage)) + </span><br><span class="line">  geom_point(size=3) + </span><br><span class="line">  geom_segment(aes(x=make, </span><br><span class="line">                   xend=make, </span><br><span class="line">                   y=0, </span><br><span class="line">                   yend=mileage)) + </span><br><span class="line">  labs(title=&quot;Lollipop Chart&quot;, </span><br><span class="line">       subtitle=&quot;Make Vs Avg. Mileage&quot;, </span><br><span class="line">       caption=&quot;source: mpg&quot;) + </span><br><span class="line">  theme(axis.text.x = element_text(angle=65, vjust=0.6))</span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZyMImNNgTC5NcsD0Lc6YibxB5LMA6YkzHZUAUlDxS7yM7Z01LnkpcjMpQ/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h3 id="点图">点图</h3>
<p>点图其实和棒棒糖图类似，但是没有线条，并且指标被反转到了X轴。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">library(ggplot2)</span><br><span class="line">library(scales)</span><br><span class="line">theme_set(theme_classic())</span><br><span class="line"></span><br><span class="line"># Plot</span><br><span class="line">ggplot(cty_mpg, aes(x=make, y=mileage)) + </span><br><span class="line">  geom_point(col=&quot;tomato2&quot;, size=3) +   # Draw points</span><br><span class="line">  geom_segment(aes(x=make, </span><br><span class="line">                   xend=make, </span><br><span class="line">                   y=min(mileage), </span><br><span class="line">                   yend=max(mileage)), </span><br><span class="line">               linetype=&quot;dashed&quot;, </span><br><span class="line">               size=0.1) +   # Draw dashed lines</span><br><span class="line">  labs(title=&quot;Dot Plot&quot;, </span><br><span class="line">       subtitle=&quot;Make Vs Avg. Mileage&quot;, </span><br><span class="line">       caption=&quot;source: mpg&quot;) +  </span><br><span class="line">  coord_flip()     </span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZyDiaUrzomwm1vqu2zj51icElm41csFo2UILhACzy9XWAo9pyfa1iabYiaZA/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h3 id="倾斜图">倾斜图</h3>
<p>斜率图是比较2个时间点之间位置的绝佳方法，既能展示值的大小变化，也能同时展示排名的变化。下图可以作为倾斜图的一个展示。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">library(ggplot2)</span><br><span class="line">library(scales)</span><br><span class="line">theme_set(theme_classic())</span><br><span class="line"></span><br><span class="line"># prep data</span><br><span class="line">df &lt;- read.csv(&quot;https://raw.githubusercontent.com/</span><br><span class="line">selva86/datasets/master/gdppercap.csv&quot;)</span><br><span class="line">colnames(df) &lt;- c(&quot;continent&quot;, &quot;1952&quot;, &quot;1957&quot;)</span><br><span class="line">left_label &lt;- paste(df$continent, round(df$`1952`),sep=&quot;, &quot;)</span><br><span class="line">right_label &lt;- paste(df$continent, round(df$`1957`),sep=&quot;, &quot;)</span><br><span class="line">df$class &lt;- ifelse((df$`1957` - df$`1952`) &lt; 0, &quot;red&quot;, &quot;green&quot;)</span><br><span class="line"></span><br><span class="line"># Plot</span><br><span class="line">p &lt;- ggplot(df) + </span><br><span class="line">     geom_segment(aes(x=1, xend=2, </span><br><span class="line">                      y=`1952`, yend=`1957`, </span><br><span class="line">                      col=class), size=.75, </span><br><span class="line">                      show.legend=F) + </span><br><span class="line">     geom_vline(xintercept=1, linetype=&quot;dashed&quot;, size=.1) + </span><br><span class="line">     geom_vline(xintercept=2, linetype=&quot;dashed&quot;, size=.1) +</span><br><span class="line">     scale_color_manual(labels = c(&quot;Up&quot;, &quot;Down&quot;), </span><br><span class="line">                      values = c(&quot;green&quot;=&quot;#00ba38&quot;, </span><br><span class="line">                      &quot;red&quot;=&quot;#f8766d&quot;)) +  </span><br><span class="line">     labs(x=&quot;&quot;, y=&quot;Mean GdpPerCap&quot;) +  </span><br><span class="line">     xlim(.5, 2.5) + ylim(0,(1.1*(max(df$`1952`, df$`1957`))))  </span><br><span class="line"></span><br><span class="line"># Add texts</span><br><span class="line">p &lt;- p + geom_text(label=left_label, y=df$`1952`, </span><br><span class="line">                   x=rep(1, NROW(df)), hjust=1.1, size=3.5)</span><br><span class="line">p &lt;- p + geom_text(label=right_label, y=df$`1957`, </span><br><span class="line">                   x=rep(2, NROW(df)), hjust=-0.1, size=3.5)</span><br><span class="line">p &lt;- p + geom_text(label=&quot;Time 1&quot;, x=1, y=1.1*(max(df$`1952`, </span><br><span class="line">                   df$`1957`)), hjust=1.2, size=5)  </span><br><span class="line">p &lt;- p + geom_text(label=&quot;Time 2&quot;, x=2, y=1.1*(max(df$`1952`, </span><br><span class="line">                   df$`1957`)), hjust=-0.1, size=5)  </span><br><span class="line"></span><br><span class="line"># Minify theme</span><br><span class="line">p + theme(panel.background = element_blank(), </span><br><span class="line">           panel.grid = element_blank(),</span><br><span class="line">           axis.ticks = element_blank(),</span><br><span class="line">           axis.text.x = element_blank(),</span><br><span class="line">           panel.border = element_blank(),</span><br><span class="line">           plot.margin = unit(c(1,2,1,2), &quot;cm&quot;))    </span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZyybecsomzfdw7zVeE8LUF5fYId5xpLMdD6nUNW9AMOs7FJsZWGLicJxw/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h3 id="哑铃图">哑铃图</h3>
<p>哑铃图适合展示两个时间点之间的相对位置，比较两个类别之间的距离。正确的哑铃图要求Y轴变量是一个因子，并且因子水平与指标顺序相同。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"># devtools::install_github(&quot;hrbrmstr/ggalt&quot;)</span><br><span class="line">library(ggplot2)</span><br><span class="line">library(ggalt)</span><br><span class="line">theme_set(theme_classic())</span><br><span class="line"></span><br><span class="line">health &lt;- read.csv(&quot;https://raw.githubusercontent.com/</span><br><span class="line">selva86/datasets/master/health.csv&quot;)</span><br><span class="line">health$Area &lt;- factor(health$Area, levels=as.character(health$Area))  </span><br><span class="line"></span><br><span class="line"># health$Area &lt;- factor(health$Area)</span><br><span class="line">gg &lt;- ggplot(health, aes(x=pct_2013, xend=pct_2014, </span><br><span class="line">y=Area, group=Area)) + </span><br><span class="line">        geom_dumbbell(color=&quot;#a3c4dc&quot;, </span><br><span class="line">                      size=0.75, </span><br><span class="line">                      point.colour.l=&quot;#0e668b&quot;) + </span><br><span class="line">        scale_x_continuous(label=percent) + </span><br><span class="line">        labs(x=NULL, </span><br><span class="line">             y=NULL, </span><br><span class="line">             title=&quot;Dumbbell Chart&quot;, </span><br><span class="line">             subtitle=&quot;Pct Change: 2013 vs 2014&quot;, </span><br><span class="line">             caption=&quot;Source: https://github.com/hrbrmstr/ggalt&quot;) +</span><br><span class="line">        theme(plot.title = element_text(hjust=0.5, face=&quot;bold&quot;),</span><br><span class="line">              plot.background=element_rect(fill=&quot;#f7f7f7&quot;),</span><br><span class="line">              panel.background=element_rect(fill=&quot;#f7f7f7&quot;),</span><br><span class="line">              panel.grid.minor=element_blank(),</span><br><span class="line">              panel.grid.major.y=element_blank(),</span><br><span class="line">              panel.grid.major.x=element_line(),</span><br><span class="line">              axis.ticks=element_blank(),</span><br><span class="line">              legend.position=&quot;top&quot;,</span><br><span class="line">              panel.border=element_blank())</span><br><span class="line">plot(gg)    </span><br></pre></td></tr></table></figure>
<p>![图片](data:image/svg+xml,&lt;%3Fxml version=‘1.0’ encoding=‘UTF-8’%3F&gt;<svg width="1px" height="1px" viewbox="0 0 1 1" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title/><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" fill-opacity="0"><g transform="translate(-249.000000, -126.000000)" fill="%23FFFFFF"><rect x="249" y="126" width="1" height="1"/></g></g></svg>)</p>
<h2 id="类型四-分布">类型四: 分布</h2>
<p>当拥有大量数据点并想要研究数据点的分布特点时，则可以画分布图。</p>
<h3 id="直方图">直方图</h3>
<p>连续变量直方图一般可以通过geom_bar()或者geom_histogram()来实现。当使用geom_histogram()时，可以选择使用bin参数来控制柱子的数量。或者也可以通过设置binwidth来设置bin的范围。因为geom_*histogram提供了控制箱数和binwidth的功能，因此一般可以选择geom_*histogram来绘制直方图。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">library(ggplot2)</span><br><span class="line">theme_set(theme_classic())</span><br><span class="line"></span><br><span class="line"># Histogram on a Continuous (Numeric) Variable</span><br><span class="line">g &lt;- ggplot(mpg, aes(displ)) +      scale_fill_brewer(palette = &quot;Spectral&quot;)</span><br><span class="line">g + geom_histogram(aes(fill=class), </span><br><span class="line">                   binwidth = .1, </span><br><span class="line">                   col=&quot;black&quot;, </span><br><span class="line">                   size=.1) +  # change binwidth</span><br><span class="line">  labs(title=&quot;Histogram with Auto Binning&quot;, </span><br><span class="line">       subtitle=&quot;Engine Displacement across Vehicle Classes&quot;)  </span><br><span class="line"></span><br><span class="line">g + geom_histogram(aes(fill=class), </span><br><span class="line">                   bins=5, </span><br><span class="line">                   col=&quot;black&quot;, </span><br><span class="line">                   size=.1) +   # change number of bins</span><br><span class="line">  labs(title=&quot;Histogram with Fixed Bins&quot;, </span><br><span class="line">       subtitle=&quot;Engine Displacement across Vehicle Classes&quot;)     </span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZytyuRxm841U2cyhXZBTWg7Bj0Y9AXvFhlcURHaWbibYRDLicHMdorE0lA/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<p>![图片](data:image/svg+xml,&lt;%3Fxml version=‘1.0’ encoding=‘UTF-8’%3F&gt;<svg width="1px" height="1px" viewbox="0 0 1 1" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title/><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" fill-opacity="0"><g transform="translate(-249.000000, -126.000000)" fill="%23FFFFFF"><rect x="249" y="126" width="1" height="1"/></g></g></svg>)</p>
<h3 id="分类变量直方图">分类变量直方图</h3>
<p>分类变量上的直方图将生成显示每个类别的条形图的频率图表。通过调整宽度，可以调整条形的厚度。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">library(ggplot2)</span><br><span class="line">theme_set(theme_classic())</span><br><span class="line"></span><br><span class="line"># Histogram on a Categorical variable</span><br><span class="line">g &lt;- ggplot(mpg, aes(manufacturer))</span><br><span class="line">g + geom_bar(aes(fill=class), width = 0.5) + </span><br><span class="line">  theme(axis.text.x = element_text(angle=65, vjust=0.6)) + </span><br><span class="line">  labs(title=&quot;Histogram on Categorical Variable&quot;, </span><br><span class="line">       subtitle=&quot;Manufacturer across Vehicle Classes&quot;)     </span><br></pre></td></tr></table></figure>
<p>![图片](data:image/svg+xml,&lt;%3Fxml version=‘1.0’ encoding=‘UTF-8’%3F&gt;<svg width="1px" height="1px" viewbox="0 0 1 1" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title/><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" fill-opacity="0"><g transform="translate(-249.000000, -126.000000)" fill="%23FFFFFF"><rect x="249" y="126" width="1" height="1"/></g></g></svg>)</p>
<h3 id="密度函数图">密度函数图</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">library(ggplot2)</span><br><span class="line">theme_set(theme_classic())</span><br><span class="line"></span><br><span class="line"># Plot</span><br><span class="line">g &lt;- ggplot(mpg, aes(cty))</span><br><span class="line">g + geom_density(aes(fill=factor(cyl)), alpha=0.8) + </span><br><span class="line">    labs(title=&quot;Density plot&quot;, </span><br><span class="line">         subtitle=&quot;City Mileage Grouped by Number of cylinders&quot;,</span><br><span class="line">         caption=&quot;Source: mpg&quot;,</span><br><span class="line">         x=&quot;City Mileage&quot;,</span><br><span class="line">         fill=&quot;# Cylinders&quot;)    </span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZyuJFWvvUKwLu1eEeRfh2BQloapUoiaBXQM00rdYLS6kTGs6qiaZACIWkw/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h3 id="箱型图">箱型图</h3>
<p>箱形图是研究数据分布的一个好工具。它还可以显示多个组内的分布，以及中位数，范围和异常值。<br>
箱型图框内的黑线代表数据的中位数，箱子的顶部和底部分布时数据的75%和25%的分位数。线条的终点距离为1.5*IQR，IQR为第25和第75百分位数之间的距离。线条以外的点衬之为异常点。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">library(ggplot2)</span><br><span class="line">theme_set(theme_classic())</span><br><span class="line"></span><br><span class="line"># Plot</span><br><span class="line">g &lt;- ggplot(mpg, aes(class, cty))</span><br><span class="line">g + geom_boxplot(varwidth=T, fill=&quot;plum&quot;) + </span><br><span class="line">    labs(title=&quot;Box plot&quot;, </span><br><span class="line">         subtitle=&quot;City Mileage grouped by Class of vehicle&quot;,</span><br><span class="line">         caption=&quot;Source: mpg&quot;,</span><br><span class="line">         x=&quot;Class of Vehicle&quot;,</span><br><span class="line">         y=&quot;City Mileage&quot;)    </span><br></pre></td></tr></table></figure>
<p>![图片](data:image/svg+xml,&lt;%3Fxml version=‘1.0’ encoding=‘UTF-8’%3F&gt;<svg width="1px" height="1px" viewbox="0 0 1 1" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title/><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" fill-opacity="0"><g transform="translate(-249.000000, -126.000000)" fill="%23FFFFFF"><rect x="249" y="126" width="1" height="1"/></g></g></svg>)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">library(ggthemes)</span><br><span class="line">g &lt;- ggplot(mpg, aes(class, cty))</span><br><span class="line">g + geom_boxplot(aes(fill=factor(cyl))) + </span><br><span class="line">  theme(axis.text.x = element_text(angle=65, vjust=0.6)) + </span><br><span class="line">  labs(title=&quot;Box plot&quot;, </span><br><span class="line">       subtitle=&quot;City Mileage grouped by Class of vehicle&quot;,</span><br><span class="line">       caption=&quot;Source: mpg&quot;,</span><br><span class="line">       x=&quot;Class of Vehicle&quot;,</span><br><span class="line">       y=&quot;City Mileage&quot;)</span><br></pre></td></tr></table></figure>
<p>![图片](data:image/svg+xml,&lt;%3Fxml version=‘1.0’ encoding=‘UTF-8’%3F&gt;<svg width="1px" height="1px" viewbox="0 0 1 1" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title/><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" fill-opacity="0"><g transform="translate(-249.000000, -126.000000)" fill="%23FFFFFF"><rect x="249" y="126" width="1" height="1"/></g></g></svg>)</p>
<h3 id="带点的箱型图">带点的箱型图</h3>
<p>除了箱型图的基本信息外，点图可以为箱型图提供更多的信息，在图中每个点代表一个观察点。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">library(ggplot2)</span><br><span class="line">theme_set(theme_bw())</span><br><span class="line"></span><br><span class="line"># plot</span><br><span class="line">g &lt;- ggplot(mpg, aes(manufacturer, cty))</span><br><span class="line">g + geom_boxplot() + </span><br><span class="line">  geom_dotplot(binaxis=&#x27;y&#x27;, </span><br><span class="line">               stackdir=&#x27;center&#x27;, </span><br><span class="line">               dotsize = .5, </span><br><span class="line">               fill=&quot;red&quot;) +</span><br><span class="line">  theme(axis.text.x = element_text(angle=65, vjust=0.6)) + </span><br><span class="line">  labs(title=&quot;Box plot + Dot plot&quot;, </span><br><span class="line">       subtitle=&quot;City Mileage vs Class: Each dot represents 1 row                 in source data&quot;,       caption=&quot;Source: mpg&quot;,</span><br><span class="line">       x=&quot;Class of Vehicle&quot;,</span><br><span class="line">       y=&quot;City Mileage&quot;)    </span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZy3D6tUicrpq6bgNTNVhXeXk4icElxppw2ia6NibTRJr9ib9Z7XtqEvAjciaOg/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h3 id="tufte-箱型图">Tufte 箱型图</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">library(ggthemes)</span><br><span class="line">library(ggplot2)</span><br><span class="line">theme_set(theme_tufte())  # from ggthemes</span><br><span class="line"></span><br><span class="line"># plot</span><br><span class="line">g &lt;- ggplot(mpg, aes(manufacturer, cty))</span><br><span class="line">g + geom_tufteboxplot() + </span><br><span class="line">      theme(axis.text.x = element_text(angle=65, vjust=0.6)) + </span><br><span class="line">      labs(title=&quot;Tufte Styled Boxplot&quot;, </span><br><span class="line">           subtitle=&quot;City Mileage grouped by Class of vehicle&quot;,</span><br><span class="line">           caption=&quot;Source: mpg&quot;,</span><br><span class="line">           x=&quot;Class of Vehicle&quot;,</span><br><span class="line">           y=&quot;City Mileage&quot;)</span><br></pre></td></tr></table></figure>
<p>![图片](data:image/svg+xml,&lt;%3Fxml version=‘1.0’ encoding=‘UTF-8’%3F&gt;<svg width="1px" height="1px" viewbox="0 0 1 1" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title/><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" fill-opacity="0"><g transform="translate(-249.000000, -126.000000)" fill="%23FFFFFF"><rect x="249" y="126" width="1" height="1"/></g></g></svg>)</p>
<h3 id="小提琴图">小提琴图</h3>
<p>小提琴图与箱型图类似，但是小提琴图还包含了数据的密度函数图。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">library(ggplot2)</span><br><span class="line">theme_set(theme_bw())</span><br><span class="line"></span><br><span class="line"># plot</span><br><span class="line">g &lt;- ggplot(mpg, aes(class, cty))</span><br><span class="line">g + geom_violin() + </span><br><span class="line">  labs(title=&quot;Violin plot&quot;, </span><br><span class="line">       subtitle=&quot;City Mileage vs Class of vehicle&quot;,</span><br><span class="line">       caption=&quot;Source: mpg&quot;,</span><br><span class="line">       x=&quot;Class of Vehicle&quot;,</span><br><span class="line">       y=&quot;City Mileage&quot;)</span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZyGhFLO717lyClJfsMOSTyy3ZiayVb4kicnsibGcyJtV2ZqmLTGibniaPTg1g/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h3 id="人口金字塔图">人口金字塔图</h3>
<p>人口金字塔提供了一种独特的方式来可视化人口数量或人口百分比。下面的金字塔图，反映了在电子邮件营销活动渠道的每个阶段用户数。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">library(ggplot2)</span><br><span class="line">library(ggthemes)</span><br><span class="line">options(scipen = 999)  # turns of scientific notations like 1e+40</span><br><span class="line"></span><br><span class="line"># Read data</span><br><span class="line">email_campaign_funnel &lt;- read.csv(&quot;https://raw.githubusercontent.com/selva86/datasets/master/email_campaign_funnel.csv&quot;)</span><br><span class="line"># X Axis Breaks and Labels </span><br><span class="line">brks &lt;- seq(-15000000, 15000000, 5000000)</span><br><span class="line">lbls = paste0(as.character(c(seq(15, 0, -5), </span><br><span class="line">       seq(5, 15, 5))), &quot;m&quot;)</span><br><span class="line"></span><br><span class="line"># Plot</span><br><span class="line">ggplot(email_campaign_funnel, aes(x = Stage, </span><br><span class="line">       y = Users, fill = Gender)) +   # Fill column</span><br><span class="line">geom_bar(stat = &quot;identity&quot;, width = .6) +   # draw the bars</span><br><span class="line">scale_y_continuous(breaks = brks,   # Breaks</span><br><span class="line">labels = lbls) + # Labels</span><br><span class="line"> coord_flip() +  # Flip axes</span><br><span class="line">labs(title=&quot;Email Campaign Funnel&quot;) +</span><br><span class="line">theme_tufte() +  # Tufte theme from ggfortify</span><br><span class="line">theme(plot.title = element_text(hjust = .5), </span><br><span class="line">      axis.ticks = element_blank()) +   # Centre plot title</span><br><span class="line">scale_fill_brewer(palette = &quot;Dark2&quot;)  # Color palette    </span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZyDYA6yHMY8xn1Mz2tpEpuiaAIlK60FIMETUwUOzyMCJsanicH0zdhoxLw/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h2 id="类型五-组成">类型五: 组成</h2>
<h3 id="华夫饼图">华夫饼图</h3>
<p>华夫饼图通常可以用来显示总人口分类。我们可以通过ggplot2的geom_tile()函数实现华夫饼图。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">var &lt;- mpg$class  # the categorical data </span><br><span class="line"></span><br><span class="line">nrows &lt;- 10</span><br><span class="line">df &lt;- expand.grid(y = 1:nrows, x = 1:nrows)</span><br><span class="line">categ_table &lt;- round(table(var) * ((nrows*nrows)/(length(var))))</span><br><span class="line">categ_table</span><br><span class="line"></span><br><span class="line">df$category &lt;- factor(rep(names(categ_table), categ_table))  </span><br><span class="line"></span><br><span class="line">## Plot</span><br><span class="line">ggplot(df, aes(x = x, y = y, fill = category)) + </span><br><span class="line">        geom_tile(color = &quot;black&quot;, size = 0.5) +</span><br><span class="line">        scale_x_continuous(expand = c(0, 0)) +</span><br><span class="line">        scale_y_continuous(expand = c(0, 0), trans = &#x27;reverse&#x27;) +</span><br><span class="line">        scale_fill_brewer(palette = &quot;Set3&quot;) +</span><br><span class="line">        labs(title=&quot;Waffle Chart&quot;, subtitle=&quot;&#x27;Class&#x27; of vehicles&quot;,</span><br><span class="line">             caption=&quot;Source: mpg&quot;)   </span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZy8Y3ooQrryYeI3fo1dVFhUOxQlbAML6q4DPNpmice2F32674aCazJvjA/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h3 id="饼图">饼图</h3>
<p>饼图是显示数据组成的一种重要方式，在ggplot中，需要通过coord_polar()函数来实现。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">library(ggplot2)</span><br><span class="line">theme_set(theme_classic())</span><br><span class="line"></span><br><span class="line"># Source: Frequency table</span><br><span class="line">df &lt;- as.data.frame(table(mpg$class))</span><br><span class="line">colnames(df) &lt;- c(&quot;class&quot;, &quot;freq&quot;)</span><br><span class="line">pie &lt;- ggplot(df, aes(x = &quot;&quot;, y=freq, fill = factor(class))) + </span><br><span class="line">  geom_bar(width = 1, stat = &quot;identity&quot;) +</span><br><span class="line">  theme(axis.line = element_blank(), </span><br><span class="line">        plot.title = element_text(hjust=0.5)) + </span><br><span class="line">  labs(fill=&quot;class&quot;, </span><br><span class="line">       x=NULL, </span><br><span class="line">       y=NULL, </span><br><span class="line">       title=&quot;Pie Chart of class&quot;, </span><br><span class="line">       caption=&quot;Source: mpg&quot;)</span><br><span class="line"></span><br><span class="line">pie + coord_polar(theta = &quot;y&quot;, start=0)</span><br><span class="line"></span><br><span class="line"># Source: Categorical variable.</span><br><span class="line"># mpg$class</span><br><span class="line">pie &lt;- ggplot(mpg, aes(x = &quot;&quot;, fill = factor(class))) + </span><br><span class="line">  geom_bar(width = 1) +</span><br><span class="line">  theme(axis.line = element_blank(), </span><br><span class="line">        plot.title = element_text(hjust=0.5)) + </span><br><span class="line">  labs(fill=&quot;class&quot;, </span><br><span class="line">       x=NULL, </span><br><span class="line">       y=NULL, </span><br><span class="line">       title=&quot;Pie Chart of class&quot;, </span><br><span class="line">       caption=&quot;Source: mpg&quot;)</span><br><span class="line">  </span><br><span class="line">pie + coord_polar(theta = &quot;y&quot;, start=0)    </span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZyhzWDVOHib4kWQUBF5XcCEDLxYl2EdloZdDW9r09Mv2VO76CqmbicTJAw/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h3 id="树形图">树形图</h3>
<p>树形图是现实分层数据的好方法。在ggplot中，treemapify包含有树形图所需要的数据处理及绘图方法。<br>
为了创建树形图，需要先将数据转换成treemapify()需要的数据格式。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> library(ggplot2) </span><br><span class="line">library(treemapify)</span><br><span class="line">proglangs &lt;- read.csv(&quot;https://raw.githubusercontent.com/             selva86/datasets/master/proglanguages.csv&quot;)</span><br><span class="line"># plot</span><br><span class="line">treeMapCoordinates &lt;- treemapify(proglangs,</span><br><span class="line">                                 area = &quot;value&quot;,</span><br><span class="line">                                 fill = &quot;parent&quot;,</span><br><span class="line">                                 label = &quot;id&quot;,</span><br><span class="line">                                 group = &quot;parent&quot;)</span><br><span class="line"></span><br><span class="line">treeMapPlot &lt;- ggplotify(treeMapCoordinates) + </span><br><span class="line">  scale_x_continuous(expand = c(0, 0)) +</span><br><span class="line">  scale_y_continuous(expand = c(0, 0)) +</span><br><span class="line">  scale_fill_brewer(palette = &quot;Dark2&quot;)</span><br><span class="line"></span><br><span class="line">print(treeMapPlot)</span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZyVZB5ib6dpicBPrju8dWNTc0klS3mmP0HN7ibYg8codE3Xf1lMbjFuuqrQ/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h3 id="条形图">条形图</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">freqtable &lt;- table(mpg$manufacturer)</span><br><span class="line">df &lt;- as.data.frame.table(freqtable)    </span><br><span class="line">library(ggplot2)</span><br><span class="line">theme_set(theme_classic())</span><br><span class="line"></span><br><span class="line"># Plot</span><br><span class="line">g &lt;- ggplot(df, aes(Var1, Freq))</span><br><span class="line">g + geom_bar(stat=&quot;identity&quot;, width = 0.5, fill=&quot;tomato2&quot;) + </span><br><span class="line">      labs(title=&quot;Bar Chart&quot;, </span><br><span class="line">           subtitle=&quot;Manufacturer of vehicles&quot;, </span><br><span class="line">           caption=&quot;Source: Frequency of Manufacturers from            &#x27;mpg&#x27; dataset&quot;) +      theme(axis.text.x = element_text(angle=65, vjust=0.6))     </span><br><span class="line">          </span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZygA91OcEFSk5b1nKibiaTwbTPO78M43SnPvZdmnfiaT5k71kdbYCwE8e7A/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<p>当然还可以按组对数据进行着色</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># From on a categorical column variable</span><br><span class="line">g &lt;- ggplot(mpg, aes(manufacturer))</span><br><span class="line">g + geom_bar(aes(fill=class), width = 0.5) + </span><br><span class="line">  theme(axis.text.x = element_text(angle=65, vjust=0.6)) +</span><br><span class="line">  labs(title=&quot;Categorywise Bar Chart&quot;, </span><br><span class="line">       subtitle=&quot;Manufacturer of vehicles&quot;, </span><br><span class="line">       caption=&quot;Source: Manufacturers from &#x27;mpg&#x27; dataset&quot;)    </span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZyeCo1MqCDRHsV6IZKwybIWV9cQVib9dkvibzaT42uTfZluExhOI1pbq6Q/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h2 id="类型六-时序变化">类型六:时序变化</h2>
<h3 id="时间序列图">时间序列图</h3>
<p>ggfortify包支持autoplot函数直接从时间序列对象中自动绘制时间序列图。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">## From Timeseries object (ts)</span><br><span class="line">library(ggplot2)</span><br><span class="line">library(ggfortify)</span><br><span class="line">theme_set(theme_classic())</span><br><span class="line"></span><br><span class="line"># Plot </span><br><span class="line">autoplot(AirPassengers) + </span><br><span class="line">  labs(title=&quot;AirPassengers&quot;)    </span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZyanmUk5Al6jV0OvbF2uV8BNZxMfIRbvGUlbnbUeNickw4zcoFY0V2hXQ/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h3 id="dataframe格式的时间序列图">dataframe格式的时间序列图</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">library(ggplot2)</span><br><span class="line">theme_set(theme_classic())</span><br><span class="line"></span><br><span class="line"># Allow Default X Axis Labels</span><br><span class="line">ggplot(economics, aes(x=date)) + </span><br><span class="line">  geom_line(aes(y=returns_perc)) + </span><br><span class="line">  labs(title=&quot;Time Series Chart&quot;, </span><br><span class="line">       subtitle=&quot;Returns Percentage from &#x27;Economics&#x27; Dataset&quot;, </span><br><span class="line">       caption=&quot;Source: Economics&quot;, </span><br><span class="line">       y=&quot;Returns %&quot;)    </span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZyricRP6CfMAvBlTL4a6L0FomzibJJSiaoNia3j8tOXeAC6n0H9laDo0070w/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h3 id="关于月度数据的时间序列图">关于月度数据的时间序列图</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">library(ggplot2)</span><br><span class="line">library(lubridate)</span><br><span class="line">theme_set(theme_bw())</span><br><span class="line"></span><br><span class="line">economics_m &lt;- economics[1:24, ]</span><br><span class="line"></span><br><span class="line"># labels and breaks for X axis text</span><br><span class="line">lbls &lt;- paste0(month.abb[month(economics_m$date)], &quot; &quot;, </span><br><span class="line">lubridate::year(economics_m$date))</span><br><span class="line">brks &lt;- economics_m$date</span><br><span class="line"></span><br><span class="line"># plot</span><br><span class="line">ggplot(economics_m, aes(x=date)) + </span><br><span class="line">  geom_line(aes(y=uempmed)) + </span><br><span class="line">  labs(title=&quot;Monthly Time Series&quot;, </span><br><span class="line">       subtitle=&quot;Returns Percentage from Economics Dataset&quot;, </span><br><span class="line">       caption=&quot;Source: Economics&quot;, </span><br><span class="line">       y=&quot;Returns %&quot;) +  # title and caption</span><br><span class="line">  scale_x_date(labels = lbls, </span><br><span class="line">               breaks = brks) +  </span><br><span class="line">  theme(axis.text.x = element_text(angle = 90, vjust=0.5),  </span><br><span class="line">        panel.grid.minor = element_blank())     </span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZyZMqoWMTnkzmbMbnpxtg4GiaqibSLZh3micu4tqibZbyXAzfwVWdeXjYiaVg/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h3 id="关于年度数据的时间序列图">关于年度数据的时间序列图</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">library(ggplot2)</span><br><span class="line">library(lubridate)</span><br><span class="line">theme_set(theme_bw())</span><br><span class="line"></span><br><span class="line">economics_y &lt;- economics[1:90, ]</span><br><span class="line"></span><br><span class="line"># labels and breaks for X axis text</span><br><span class="line">brks &lt;- economics_y$date[seq(1, length(economics_y$date), 12)]</span><br><span class="line">lbls &lt;- lubridate::year(brks)</span><br><span class="line"></span><br><span class="line"># plot</span><br><span class="line">ggplot(economics_y, aes(x=date)) + </span><br><span class="line">  geom_line(aes(y=uempmed)) + </span><br><span class="line">  labs(title=&quot;Yearly Time Series&quot;, </span><br><span class="line">       subtitle=&quot;uempmed Percentage from Economics Dataset&quot;, </span><br><span class="line">       caption=&quot;Source: Economics&quot;, </span><br><span class="line">       y=&quot;uempmed %&quot;) +  # title and caption</span><br><span class="line">  scale_x_date(labels = lbls, </span><br><span class="line">               breaks = brks) + </span><br><span class="line">  theme(axis.text.x = element_text(angle = 90, vjust=0.5),          panel.grid.minor = element_blank())     </span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZypneiaRbk16BsSNmq2v7TXxzd7icEiaRpXxg9ky1s1XFeaWtresGhLYpzg/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h3 id="同时展示多个时间序列">同时展示多个时间序列</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">data(economics_long, package = &quot;ggplot2&quot;)</span><br><span class="line">head(economics_long)</span><br><span class="line">library(ggplot2)</span><br><span class="line">library(lubridate)</span><br><span class="line">theme_set(theme_bw())</span><br><span class="line"></span><br><span class="line">df &lt;- economics_long[economics_long$variable %in% </span><br><span class="line"> c(&quot;psavert&quot;, &quot;uempmed&quot;), ]</span><br><span class="line">df &lt;- df[lubridate::year(df$date) %in% c(1967:1981), ]</span><br><span class="line"></span><br><span class="line"># labels and breaks for X axis text</span><br><span class="line">brks &lt;- df$date[seq(1, length(df$date), 12)]</span><br><span class="line">lbls &lt;- lubridate::year(brks)</span><br><span class="line"></span><br><span class="line"># plot</span><br><span class="line">ggplot(df, aes(x=date)) + </span><br><span class="line">  geom_line(aes(y=value, col=variable)) + </span><br><span class="line">  labs(title=&quot;Time Series of Returns Percentage&quot;, </span><br><span class="line">       subtitle=&quot;Drawn from Long Data format&quot;, </span><br><span class="line">       caption=&quot;Source: Economics&quot;, </span><br><span class="line">       y=&quot;Returns %&quot;, </span><br><span class="line">       color=NULL) +  # title and caption</span><br><span class="line">  scale_x_date(labels = lbls, breaks = brks) +  </span><br><span class="line">  scale_color_manual(labels = c(&quot;psavert&quot;, &quot;uempmed&quot;), </span><br><span class="line">                     values = c(&quot;psavert&quot;=&quot;#00ba38&quot;,  </span><br><span class="line">                     &quot;uempmed&quot;=&quot;#f8766d&quot;)) +  </span><br><span class="line">  theme(axis.text.x = element_text(angle = 90, vjust=0.5, size = 8),  </span><br><span class="line">        panel.grid.minor = element_blank())      </span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZyRKgr7tyibCyCYOnVjibUe5OdF3gfeFjCXoWJwwpffD5pOfVofTChaAWg/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h3 id="堆积图">堆积图</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">library(ggplot2)</span><br><span class="line">library(lubridate)</span><br><span class="line">theme_set(theme_bw())</span><br><span class="line"></span><br><span class="line">df &lt;- economics[, c(&quot;date&quot;, &quot;psavert&quot;, &quot;uempmed&quot;)]</span><br><span class="line">df &lt;- df[lubridate::year(df$date) %in% c(1967:1981), ]</span><br><span class="line"></span><br><span class="line"># labels and breaks for X axis text</span><br><span class="line">brks &lt;- df$date[seq(1, length(df$date), 12)]</span><br><span class="line">lbls &lt;- lubridate::year(brks)</span><br><span class="line"></span><br><span class="line"># plot</span><br><span class="line">ggplot(df, aes(x=date)) + </span><br><span class="line">  geom_area(aes(y=psavert+uempmed, fill=&quot;psavert&quot;)) + </span><br><span class="line">  geom_area(aes(y=uempmed, fill=&quot;uempmed&quot;)) + </span><br><span class="line">  labs(title=&quot;Area Chart of Returns Percentage&quot;, </span><br><span class="line">       subtitle=&quot;From Wide Data format&quot;, </span><br><span class="line">       caption=&quot;Source: Economics&quot;, </span><br><span class="line">       y=&quot;Returns %&quot;) +  </span><br><span class="line">  scale_x_date(labels = lbls, breaks = brks) +  </span><br><span class="line">  scale_fill_manual(name=&quot;&quot;, </span><br><span class="line">  values = c(&quot;psavert&quot;=&quot;#00ba38&quot;, &quot;uempmed&quot;=&quot;#f8766d&quot;)) +  </span><br><span class="line">  theme(panel.grid.minor = element_blank())      </span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZyrJ2HTYO7PVf9icIsiaibfWLckR9F9kPkd8QRQ8MnGq2zhLIvu9hBanK9g/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h3 id="日历热图">日历热图</h3>
<p>当你想强调在日历格式中，数据变化情况(如股票数据)，那么就可以使用日历热图。通过数据准备，我们可以用geom_tile函数来实现日历热图。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">library(ggplot2)</span><br><span class="line">library(plyr)</span><br><span class="line">library(scales)</span><br><span class="line">library(zoo)</span><br><span class="line"></span><br><span class="line">df &lt;- read.csv(&quot;https://raw.githubusercontent.com/selva86/datasets/master/yahoo.csv&quot;)df$date &lt;- as.Date(df$date)  # format date</span><br><span class="line">df &lt;- df[df$year &gt;= 2012, ]  # filter reqd years</span><br><span class="line"></span><br><span class="line"># Create Month Week</span><br><span class="line">df$yearmonth &lt;- as.yearmon(df$date)</span><br><span class="line">df$yearmonthf &lt;- factor(df$yearmonth)</span><br><span class="line">df &lt;- ddply(df,.(yearmonthf), transform, monthweek=1+week-min(week))  </span><br><span class="line">df &lt;- df[, c(&quot;year&quot;, &quot;yearmonthf&quot;, &quot;monthf&quot;, </span><br><span class="line">&quot;week&quot;, &quot;monthweek&quot;, &quot;weekdayf&quot;, &quot;VIX.Close&quot;)]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># Plot</span><br><span class="line">ggplot(df, aes(monthweek, weekdayf, fill = VIX.Close)) + </span><br><span class="line">  geom_tile(colour = &quot;white&quot;) + </span><br><span class="line">  facet_grid(year~monthf) + </span><br><span class="line">  scale_fill_gradient(low=&quot;red&quot;, high=&quot;green&quot;) +</span><br><span class="line">  labs(x=&quot;Week of Month&quot;,</span><br><span class="line">       y=&quot;&quot;,</span><br><span class="line">       title = &quot;Time-Series Calendar Heatmap&quot;, </span><br><span class="line">       subtitle=&quot;Yahoo Closing Price&quot;, </span><br><span class="line">       fill=&quot;Close&quot;)    </span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZye93T9EPfBX2kBGRMqsuaMmvUsxw04SibahoFHodqI5UTbAVibXI9uiazQ/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h3 id="季节性时间序列">季节性时间序列</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">library(ggplot2)</span><br><span class="line">library(forecast)</span><br><span class="line">theme_set(theme_classic())</span><br><span class="line"></span><br><span class="line"># Subset data</span><br><span class="line">nottem_small &lt;- window(nottem, start=c(1920, 1), end=c(1925, 12))  # subset a smaller timewindow</span><br><span class="line"># Plot</span><br><span class="line">ggseasonplot(AirPassengers) +    labs(title=&quot;Seasonal plot: International Airline Passengers&quot;)ggseasonplot(nottem_small) +    labs(title=&quot;Seasonal plot: Air temperatures at Nottingham Castle&quot;)   </span><br><span class="line"> </span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZyDcBLCxqEhArJiabn62xRyEsZaoGYSNSaibN9yQbdUopBqkA3UUOZFX7A/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZyFmI8KgB4FK6hqDibvS6liahFAO4JDj6SAEQRdNUDia1IKU4hT0f3HWhUA/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h2 id="类型七-分组">类型七: 分组</h2>
<h3 id="分层树形图">分层树形图</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># install.packages(&quot;ggdendro&quot;)</span><br><span class="line">library(ggplot2)</span><br><span class="line">library(ggdendro)</span><br><span class="line">theme_set(theme_bw())</span><br><span class="line"></span><br><span class="line">hc &lt;- hclust(dist(USArrests), &quot;ave&quot;)  # hierarchical clustering</span><br><span class="line"></span><br><span class="line"># plot</span><br><span class="line">ggdendrogram(hc, rotate = TRUE, size = 2)    </span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZyQic81dyMMPRHBrcwtGmhNsAadoia0leraFyTqaBaYN2Vib1Cjfgic8Xx7Q/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h3 id="组群">组群</h3>
<p>对于不同的数据蔟，我们可以用geom_<em>encircle()来显示。如果数据存在多维特征，可以考虑采用PCA降维，并将第一主成分与第二主成分作为图形的X、Y轴。geom</em>encircle（）将需要突出的数据蔟包围起来，从而达到突出数据的作用。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># devtools::install_github(&quot;hrbrmstr/ggalt&quot;)</span><br><span class="line">library(ggplot2)</span><br><span class="line">library(ggalt)</span><br><span class="line">library(ggfortify)</span><br><span class="line">theme_set(theme_classic())</span><br><span class="line"></span><br><span class="line">df &lt;- iris[c(1, 2, 3, 4)]</span><br><span class="line">pca_mod &lt;- prcomp(df)  </span><br><span class="line"></span><br><span class="line">df_pc &lt;- data.frame(pca_mod$x, Species=iris$Species)  </span><br><span class="line">df_pc_vir &lt;- df_pc[df_pc$Species == &quot;virginica&quot;, ]  </span><br><span class="line">df_pc_set &lt;- df_pc[df_pc$Species == &quot;setosa&quot;, ]  </span><br><span class="line">df_pc_ver &lt;- df_pc[df_pc$Species == &quot;versicolor&quot;, ]  </span><br><span class="line"> </span><br><span class="line"># Plot ----------------------------------------------------</span><br><span class="line">ggplot(df_pc, aes(PC1, PC2, col=Species)) + </span><br><span class="line">  geom_point(aes(shape=Species), size=2) +   </span><br><span class="line">  labs(title=&quot;Iris Clustering&quot;, </span><br><span class="line">       subtitle=&quot;With principal components PC1 and </span><br><span class="line">       PC2 as X and Y axis&quot;,</span><br><span class="line">       caption=&quot;Source: Iris&quot;) + </span><br><span class="line">  coord_cartesian(xlim = 1.2 * c(min(df_pc$PC1), max(df_pc$PC1)), </span><br><span class="line">                  ylim = 1.2 * c(min(df_pc$PC2), max(df_pc$PC2))) +   </span><br><span class="line">  geom_encircle(data = df_pc_vir, aes(x=PC1, y=PC2)) +   </span><br><span class="line">  geom_encircle(data = df_pc_set, aes(x=PC1, y=PC2)) + </span><br><span class="line">  geom_encircle(data = df_pc_ver, aes(x=PC1, y=PC2))    </span><br></pre></td></tr></table></figure>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZyHg34x9NPRdU2kxicib4hw7mpEia84pktDJcKV7RVHSsH3Du8EYCSBicyZg/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h2 id="类型八-空间可视化">类型八: 空间可视化</h2>
<p>ggmap包提供了与google maps api交互的工具，并获取要绘制的地点的坐标 。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"># Better install the dev versions ----------</span><br><span class="line"># devtools::install_github(&quot;dkahle/ggmap&quot;)</span><br><span class="line"># devtools::install_github(&quot;hrbrmstr/ggalt&quot;)</span><br><span class="line"></span><br><span class="line"># load packages</span><br><span class="line">library(ggplot2)</span><br><span class="line">library(ggmap)</span><br><span class="line">library(ggalt)</span><br><span class="line"></span><br><span class="line"># Get Chennai&#x27;s Coordinates --------------------------------</span><br><span class="line">chennai &lt;-  geocode(&quot;Chennai&quot;)  </span><br><span class="line"></span><br><span class="line"># Get the Map ----------------------------------------------</span><br><span class="line"># Google Satellite Map</span><br><span class="line">chennai_ggl_sat_map &lt;- qmap(&quot;chennai&quot;, zoom=12, </span><br><span class="line">source = &quot;google&quot;, maptype=&quot;satellite&quot;)  </span><br><span class="line"></span><br><span class="line"># Google Road Map</span><br><span class="line">chennai_ggl_road_map &lt;- qmap(&quot;chennai&quot;, zoom=12, </span><br><span class="line">source = &quot;google&quot;, maptype=&quot;roadmap&quot;)  </span><br><span class="line"></span><br><span class="line"># Google Hybrid Map</span><br><span class="line">chennai_ggl_hybrid_map &lt;- qmap(&quot;chennai&quot;, zoom=12, </span><br><span class="line">source = &quot;google&quot;, maptype=&quot;hybrid&quot;)  </span><br><span class="line"></span><br><span class="line"># Open Street Map</span><br><span class="line">chennai_osm_map &lt;- qmap(&quot;chennai&quot;, zoom=12, source = &quot;osm&quot;)   </span><br><span class="line"></span><br><span class="line"># Get Coordinates for Chennai&#x27;s Places ---------------------</span><br><span class="line">chennai_places &lt;- c(&quot;Kolathur&quot;,</span><br><span class="line">                    &quot;Washermanpet&quot;,</span><br><span class="line">                    &quot;Royapettah&quot;,</span><br><span class="line">                    &quot;Adyar&quot;,</span><br><span class="line">                    &quot;Guindy&quot;)</span><br><span class="line"></span><br><span class="line">places_loc &lt;- geocode(chennai_places)  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># Plot Open Street Map -------------------------------------</span><br><span class="line">chennai_osm_map + geom_point(aes(x=lon, y=lat),</span><br><span class="line">                             data = places_loc, </span><br><span class="line">                             alpha = 0.7, </span><br><span class="line">                             size = 7, </span><br><span class="line">                             color = &quot;tomato&quot;) + </span><br><span class="line">  geom_encircle(aes(x=lon, y=lat),</span><br><span class="line">                data = places_loc, size = 2, color = &quot;blue&quot;)</span><br><span class="line"></span><br><span class="line"># Plot Google Road Map -------------------------------------</span><br><span class="line">chennai_ggl_road_map + geom_point(aes(x=lon, y=lat),</span><br><span class="line">                                  data = places_loc, </span><br><span class="line">                                  alpha = 0.7, </span><br><span class="line">                                  size = 7, </span><br><span class="line">                                  color = &quot;tomato&quot;) + </span><br><span class="line">  geom_encircle(aes(x=lon, y=lat),</span><br><span class="line">                data = places_loc, size = 2, color = &quot;blue&quot;)</span><br><span class="line"></span><br><span class="line"># Google Hybrid Map ----------------------------------------</span><br><span class="line">chennai_ggl_hybrid_map + geom_point(aes(x=lon, y=lat),</span><br><span class="line">                                    data = places_loc, </span><br><span class="line">                                    alpha = 0.7, </span><br><span class="line">                                    size = 7, </span><br><span class="line">                                    color = &quot;tomato&quot;) + </span><br><span class="line">  geom_encircle(aes(x=lon, y=lat),</span><br><span class="line">                data = places_loc, size = 2, color = &quot;blue&quot;)    </span><br></pre></td></tr></table></figure>
<h3 id="街道地图">街道地图</h3>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZyibv5wAsWIKWLcVj2I1CsxRDWD12yiaHicZSHMEecibiaPdrQIicDrUHywBgA/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h3 id="谷歌道路图">谷歌道路图</h3>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZyWpgOIrSlAyCCiajfYkiavFhicKDGoBfn4Tyla7wKlwshZa7TCwS3nKeQQ/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
<h3 id="谷歌卫星地图">谷歌卫星地图</h3>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/mPW54JA3nXcz9vIcRgxOlHRRpjSbiaXZygbFyKzY8E3iao7saRrEWBZHhGWGgxk2xzibSAkR50AbWHrkJspCibuaibg/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://genewlan.github.io">ZhangLei</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://genewlan.github.io/2023/10/31/picture/">http://genewlan.github.io/2023/10/31/picture/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://genewlan.github.io" target="_blank">GeneWlan</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/ggplot/">ggplot</a></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/10/31/ggplot-picture/" title="ggplot_picture_bioinformation"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">ggplot_picture_bioinformation</div></div></a></div><div class="next-post pull-right"><a href="/2023/09/30/Neural-Network-Frame/" title="Neural-Network-Frame"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Neural-Network-Frame</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2023/10/31/ggplot-picture/" title="ggplot_picture_bioinformation"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-10-31</div><div class="title">ggplot_picture_bioinformation</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">ZhangLei</div><div class="author-info__description">change or die!</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">16</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">13</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/genewlan/" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:xiaolobglee@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">50个ggplot2可视化案例</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E4%B8%80%EF%BC%9A%E7%9B%B8%E5%85%B3%E6%80%A7"><span class="toc-number">1.1.</span> <span class="toc-text">类型一：相关性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%A3%E7%82%B9%E5%9B%BE"><span class="toc-number">1.1.1.</span> <span class="toc-text">散点图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%A6%E6%9C%89%E7%8E%AF%E7%BB%95%E7%9A%84%E6%95%A3%E7%82%B9%E5%9B%BE"><span class="toc-number">1.1.2.</span> <span class="toc-text">带有环绕的散点图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#jitter%E5%9B%BE"><span class="toc-number">1.1.3.</span> <span class="toc-text">Jitter图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A1%E6%95%B0%E5%9B%BE"><span class="toc-number">1.1.4.</span> <span class="toc-text">计数图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B0%94%E6%B3%A1%E5%9B%BE"><span class="toc-number">1.1.5.</span> <span class="toc-text">气泡图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E6%B0%94%E6%B3%A1%E5%9B%BE"><span class="toc-number">1.1.6.</span> <span class="toc-text">动态气泡图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%B9%E7%BC%98%E5%88%86%E5%B8%83%E7%9A%84%E7%9B%B4%E6%96%B9%E5%9B%BE-%E7%AE%B1%E5%9E%8B%E5%9B%BE"><span class="toc-number">1.1.7.</span> <span class="toc-text">边缘分布的直方图／箱型图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E5%85%B3%E7%B3%BB%E5%9B%BE"><span class="toc-number">1.1.8.</span> <span class="toc-text">相关关系图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E4%BA%8C-%E5%81%8F%E5%B7%AE"><span class="toc-number">1.2.</span> <span class="toc-text">类型二: 偏差</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E5%BD%A2%E5%9B%BE"><span class="toc-number">1.2.1.</span> <span class="toc-text">条形图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A3%92%E6%A3%92%E7%B3%96%E5%9B%BE"><span class="toc-number">1.2.2.</span> <span class="toc-text">棒棒糖图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%82%B9%E5%9B%BE"><span class="toc-number">1.2.3.</span> <span class="toc-text">点图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%A2%E7%A7%AF%E5%9B%BE"><span class="toc-number">1.2.4.</span> <span class="toc-text">面积图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E4%B8%89-%E6%8E%92%E5%BA%8F"><span class="toc-number">1.3.</span> <span class="toc-text">类型三: 排序</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%89%E5%BA%8F%E6%9D%A1%E5%BD%A2%E5%9B%BE"><span class="toc-number">1.3.1.</span> <span class="toc-text">有序条形图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A3%92%E6%A3%92%E7%B3%96%E5%9B%BE"><span class="toc-number">1.3.2.</span> <span class="toc-text">棒棒糖图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%82%B9%E5%9B%BE"><span class="toc-number">1.3.3.</span> <span class="toc-text">点图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%80%BE%E6%96%9C%E5%9B%BE"><span class="toc-number">1.3.4.</span> <span class="toc-text">倾斜图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%93%91%E9%93%83%E5%9B%BE"><span class="toc-number">1.3.5.</span> <span class="toc-text">哑铃图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E5%9B%9B-%E5%88%86%E5%B8%83"><span class="toc-number">1.4.</span> <span class="toc-text">类型四: 分布</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B4%E6%96%B9%E5%9B%BE"><span class="toc-number">1.4.1.</span> <span class="toc-text">直方图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%B1%BB%E5%8F%98%E9%87%8F%E7%9B%B4%E6%96%B9%E5%9B%BE"><span class="toc-number">1.4.2.</span> <span class="toc-text">分类变量直方图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%86%E5%BA%A6%E5%87%BD%E6%95%B0%E5%9B%BE"><span class="toc-number">1.4.3.</span> <span class="toc-text">密度函数图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%B1%E5%9E%8B%E5%9B%BE"><span class="toc-number">1.4.4.</span> <span class="toc-text">箱型图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%A6%E7%82%B9%E7%9A%84%E7%AE%B1%E5%9E%8B%E5%9B%BE"><span class="toc-number">1.4.5.</span> <span class="toc-text">带点的箱型图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tufte-%E7%AE%B1%E5%9E%8B%E5%9B%BE"><span class="toc-number">1.4.6.</span> <span class="toc-text">Tufte 箱型图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E6%8F%90%E7%90%B4%E5%9B%BE"><span class="toc-number">1.4.7.</span> <span class="toc-text">小提琴图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%BA%E5%8F%A3%E9%87%91%E5%AD%97%E5%A1%94%E5%9B%BE"><span class="toc-number">1.4.8.</span> <span class="toc-text">人口金字塔图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E4%BA%94-%E7%BB%84%E6%88%90"><span class="toc-number">1.5.</span> <span class="toc-text">类型五: 组成</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%8E%E5%A4%AB%E9%A5%BC%E5%9B%BE"><span class="toc-number">1.5.1.</span> <span class="toc-text">华夫饼图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A5%BC%E5%9B%BE"><span class="toc-number">1.5.2.</span> <span class="toc-text">饼图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%91%E5%BD%A2%E5%9B%BE"><span class="toc-number">1.5.3.</span> <span class="toc-text">树形图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E5%BD%A2%E5%9B%BE"><span class="toc-number">1.5.4.</span> <span class="toc-text">条形图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E5%85%AD-%E6%97%B6%E5%BA%8F%E5%8F%98%E5%8C%96"><span class="toc-number">1.6.</span> <span class="toc-text">类型六:时序变化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E5%9B%BE"><span class="toc-number">1.6.1.</span> <span class="toc-text">时间序列图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dataframe%E6%A0%BC%E5%BC%8F%E7%9A%84%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E5%9B%BE"><span class="toc-number">1.6.2.</span> <span class="toc-text">dataframe格式的时间序列图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E6%9C%88%E5%BA%A6%E6%95%B0%E6%8D%AE%E7%9A%84%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E5%9B%BE"><span class="toc-number">1.6.3.</span> <span class="toc-text">关于月度数据的时间序列图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E5%B9%B4%E5%BA%A6%E6%95%B0%E6%8D%AE%E7%9A%84%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E5%9B%BE"><span class="toc-number">1.6.4.</span> <span class="toc-text">关于年度数据的时间序列图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8C%E6%97%B6%E5%B1%95%E7%A4%BA%E5%A4%9A%E4%B8%AA%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97"><span class="toc-number">1.6.5.</span> <span class="toc-text">同时展示多个时间序列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A0%86%E7%A7%AF%E5%9B%BE"><span class="toc-number">1.6.6.</span> <span class="toc-text">堆积图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E5%8E%86%E7%83%AD%E5%9B%BE"><span class="toc-number">1.6.7.</span> <span class="toc-text">日历热图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%A3%E8%8A%82%E6%80%A7%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97"><span class="toc-number">1.6.8.</span> <span class="toc-text">季节性时间序列</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E4%B8%83-%E5%88%86%E7%BB%84"><span class="toc-number">1.7.</span> <span class="toc-text">类型七: 分组</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E5%B1%82%E6%A0%91%E5%BD%A2%E5%9B%BE"><span class="toc-number">1.7.1.</span> <span class="toc-text">分层树形图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E7%BE%A4"><span class="toc-number">1.7.2.</span> <span class="toc-text">组群</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E5%85%AB-%E7%A9%BA%E9%97%B4%E5%8F%AF%E8%A7%86%E5%8C%96"><span class="toc-number">1.8.</span> <span class="toc-text">类型八: 空间可视化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%97%E9%81%93%E5%9C%B0%E5%9B%BE"><span class="toc-number">1.8.1.</span> <span class="toc-text">街道地图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%B7%E6%AD%8C%E9%81%93%E8%B7%AF%E5%9B%BE"><span class="toc-number">1.8.2.</span> <span class="toc-text">谷歌道路图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%B7%E6%AD%8C%E5%8D%AB%E6%98%9F%E5%9C%B0%E5%9B%BE"><span class="toc-number">1.8.3.</span> <span class="toc-text">谷歌卫星地图</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/10/31/ggplot-picture/" title="ggplot_picture_bioinformation">ggplot_picture_bioinformation</a><time datetime="2023-10-31T09:08:06.000Z" title="发表于 2023-10-31 17:08:06">2023-10-31</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/10/31/picture/" title="50_ggplot_picture">50_ggplot_picture</a><time datetime="2023-10-31T08:48:54.000Z" title="发表于 2023-10-31 16:48:54">2023-10-31</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/09/30/Neural-Network-Frame/" title="Neural-Network-Frame">Neural-Network-Frame</a><time datetime="2023-09-30T10:55:16.000Z" title="发表于 2023-09-30 18:55:16">2023-09-30</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/09/30/bayes-net/" title="bayes-net">bayes-net</a><time datetime="2023-09-30T10:49:09.000Z" title="发表于 2023-09-30 18:49:09">2023-09-30</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/08/31/Practise/" title="LDA Modeling Practise">LDA Modeling Practise</a><time datetime="2023-08-31T06:45:25.000Z" title="发表于 2023-08-31 14:45:25">2023-08-31</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2023 By ZhangLei</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex/dist/contrib/copy-tex.min.js"></script><script>(() => {
  document.querySelectorAll('#article-container span.katex-display').forEach(item => {
    btf.wrap(item, 'div', { class: 'katex-wrap'})
  })
})()</script><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'J0s1l0MeDfMbgw4y4awgy2jX-MdYXbMMI',
      appKey: '3vZoaKxqWQYlKbXXdXuSxBsT',
      avatar: 'monsterid',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div><!-- hexo injector body_end start --><div id="background-effect"></div><script src="https://cdn.jsdelivr.net/npm/three@0.121.1/build/three.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanta/dist/vanta.birds.min.js"></script><script>VANTA.BIRDS({"el":"#background-effect","mouseControls":true,"touchControls":true,"gyroControls":false,"minHeight":200,"minWidth":200,"scale":1,"scaleMobile":1})</script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":true},"react":{"opacityDefault":1,"opacityOnHover":1},"log":false,"tagMode":false});</script></body></html>